@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/layout.cshtml";
}
@using X.PagedList.Mvc.Core;
@model X.PagedList.IPagedList<SanPham>
@foreach (var item in Model)
{
    <div class="col-lg-3 col-md-4 col-sm-6 mix oranges fresh-meat">
        <div class="featured__item">
            <div class="featured__item__pic set-bg" data-setbg=@Url.Content("../imageProduct/" + item.HinhAnh) style="background-image: url(&quot;img/featured/feature-1.jpg&quot;);" >
                <ul class="featured__item__pic__hover">
                    <li><a href="#"><i class="fa fa-heart"></i></a></li>
                    <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                    <li>
                        <a asp-controller="Cart" asp-action="AddToCart" asp-route-maSP="@item.MaSp" onclick="addToCart(@item.MaSp)">
                            <i class="fa fa-shopping-cart"></i>
                        </a>
                    </li>

                </ul>
            </div>
            <div class="featured__item__text">
                <h6><a class="ten-sp" asp-for="Home" asp-action="ChiTietSanPham" asp-route-maSP="@item.MaSp">@item.TenSp</a></h6>
                <h5>@item.Gia</h5>
            </div>
        </div>
    </div>
}


<div class="container-index-page">
    <div class="product__pagination" >
        @Html.PagedListPager(Model, page => Url.Action("Index", new { page = page }), new PagedListRenderOptions { LiElementClasses = new[] { "page-item" } })
        
    </div>
</div>
<style>
    .container-index-page{
        width: 100%;
        display:flex;
        justify-content:center;
        align-items: center
    }
   .product__pagination{
       margin-right:5px;
       margin-left:5px;
       
   }
   .page-item{
       margin-left : 5px;
       margin-right : 5px;
   }
   .ten-sp:hover{
       color:red;
   }
</style>
<script>
    function addToCart(maSP) {
        fetch(`/Cart/AddToCart`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ maSP: maSP })
        })
            .then(response => response.json())
            .then(data => {
                // Cập nhật số lượng sản phẩm hiển thị trong giỏ
                document.getElementById("cart-count").innerText = data.totalItems;
            })
            .catch(error => console.error('Error:', error));
    }
</script>
